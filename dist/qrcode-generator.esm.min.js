var Q=function(x,a){let r=x,c=H[a],e=null,t=0,f=null,d=[],y={},w=function(i,l){t=r*4+17,e=(function(n){let u=new Array(n);for(let s=0;s<n;s+=1){u[s]=new Array(n);for(let p=0;p<n;p+=1)u[s][p]=null}return u})(t),g(0,0),g(t-7,0),g(0,t-7),M(),D(),P(i,l),r>=7&&L(i),f==null&&(f=X(r,c,d)),I(f,l)},g=function(i,l){for(let n=-1;n<=7;n+=1)if(!(i+n<=-1||t<=i+n))for(let u=-1;u<=7;u+=1)l+u<=-1||t<=l+u||(0<=n&&n<=6&&(u==0||u==6)||0<=u&&u<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=u&&u<=4?e[i+n][l+u]=!0:e[i+n][l+u]=!1)},A=function(){let i=0,l=0;for(let n=0;n<8;n+=1){w(!0,n);let u=v.getLostPoint(y);(n==0||i>u)&&(i=u,l=n)}return l},D=function(){for(let i=8;i<t-8;i+=1)e[i][6]==null&&(e[i][6]=i%2==0);for(let i=8;i<t-8;i+=1)e[6][i]==null&&(e[6][i]=i%2==0)},M=function(){let i=v.getPatternPosition(r);for(let l=0;l<i.length;l+=1)for(let n=0;n<i.length;n+=1){let u=i[l],s=i[n];if(e[u][s]==null)for(let p=-2;p<=2;p+=1)for(let C=-2;C<=2;C+=1)p==-2||p==2||C==-2||C==2||p==0&&C==0?e[u+p][s+C]=!0:e[u+p][s+C]=!1}},L=function(i){let l=v.getBCHTypeNumber(r);for(let n=0;n<18;n+=1){let u=!i&&(l>>n&1)==1;e[Math.floor(n/3)][n%3+t-8-3]=u}for(let n=0;n<18;n+=1){let u=!i&&(l>>n&1)==1;e[n%3+t-8-3][Math.floor(n/3)]=u}},P=function(i,l){let n=c<<3|l,u=v.getBCHTypeInfo(n);for(let s=0;s<15;s+=1){let p=!i&&(u>>s&1)==1;s<6?e[s][8]=p:s<8?e[s+1][8]=p:e[t-15+s][8]=p}for(let s=0;s<15;s+=1){let p=!i&&(u>>s&1)==1;s<8?e[8][t-s-1]=p:s<9?e[8][15-s-1+1]=p:e[8][15-s-1]=p}e[t-8][8]=!i},I=function(i,l){let n=-1,u=t-1,s=7,p=0,C=v.getMaskFunction(l);for(let B=t-1;B>0;B-=2)for(B==6&&(B-=1);;){for(let m=0;m<2;m+=1)if(e[u][B-m]==null){let E=!1;p<i.length&&(E=(i[p]>>>s&1)==1),C(u,B-m)&&(E=!E),e[u][B-m]=E,s-=1,s==-1&&(p+=1,s=7)}if(u+=n,u<0||t<=u){u-=n,n=-n;break}}},W=function(i,l){let n=0,u=0,s=0,p=new Array(l.length),C=new Array(l.length);for(let b=0;b<l.length;b+=1){let _=l[b].dataCount,k=l[b].totalCount-_;u=Math.max(u,_),s=Math.max(s,k),p[b]=new Array(_);for(let R=0;R<p[b].length;R+=1)p[b][R]=255&i.getBuffer()[R+n];n+=_;let $=v.getErrorCorrectPolynomial(k),F=U(p[b],$.getLength()-1).mod($);C[b]=new Array($.getLength()-1);for(let R=0;R<C[b].length;R+=1){let G=R+F.getLength()-C[b].length;C[b][R]=G>=0?F.getAt(G):0}}let B=0;for(let b=0;b<l.length;b+=1)B+=l[b].totalCount;let m=new Array(B),E=0;for(let b=0;b<u;b+=1)for(let _=0;_<l.length;_+=1)b<p[_].length&&(m[E]=p[_][b],E+=1);for(let b=0;b<s;b+=1)for(let _=0;_<l.length;_+=1)b<C[_].length&&(m[E]=C[_][b],E+=1);return m},X=function(i,l,n){let u=Y.getRSBlocks(i,l),s=J();for(let C=0;C<n.length;C+=1){let B=n[C];s.put(B.getMode(),4),s.put(B.getLength(),v.getLengthInBits(B.getMode(),i)),B.write(s)}let p=0;for(let C=0;C<u.length;C+=1)p+=u[C].dataCount;if(s.getLengthInBits()>p*8)throw"code length overflow. ("+s.getLengthInBits()+">"+p*8+")";for(s.getLengthInBits()+4<=p*8&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=p*8||(s.put(236,8),s.getLengthInBits()>=p*8));)s.put(17,8);return W(s,u)};y.addData=function(i,l){l=l||"Byte";let n=null;switch(l){case"Numeric":n=q(i);break;case"Alphanumeric":n=z(i);break;case"Byte":n=tt(i);break;case"Kanji":n=et(i);break;default:throw"mode:"+l}d.push(n),f=null},y.isDark=function(i,l){if(i<0||t<=i||l<0||t<=l)throw i+","+l;return e[i][l]},y.getModuleCount=function(){return t},y.make=function(){if(r<1){let i=1;for(;i<40;i++){let l=Y.getRSBlocks(i,c),n=J();for(let s=0;s<d.length;s++){let p=d[s];n.put(p.getMode(),4),n.put(p.getLength(),v.getLengthInBits(p.getMode(),i)),p.write(n)}let u=0;for(let s=0;s<l.length;s++)u+=l[s].dataCount;if(n.getLengthInBits()<=u*8)break}r=i}w(!1,A())},y.createTableTag=function(i,l){i=i||2,l=typeof l>"u"?i*4:l;let n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+l+"px;",n+='">',n+="<tbody>";for(let u=0;u<y.getModuleCount();u+=1){n+="<tr>";for(let s=0;s<y.getModuleCount();s+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+i+"px;",n+=" height: "+i+"px;",n+=" background-color: ",n+=y.isDark(u,s)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>",n},y.createSvgTag=function(i,l,n,u){let s={};typeof arguments[0]=="object"&&(s=arguments[0],i=s.cellSize,l=s.margin,n=s.alt,u=s.title),i=i||2,l=typeof l>"u"?i*4:l,n=typeof n=="string"?{text:n}:n||{},n.text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,u=typeof u=="string"?{text:u}:u||{},u.text=u.text||null,u.id=u.text?u.id||"qrcode-title":null;let p=y.getModuleCount()*i+l*2,C,B,m,E,b="",_;for(_="l"+i+",0 0,"+i+" -"+i+",0 0,-"+i+"z ",b+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',b+=s.scalable?"":' width="'+p+'px" height="'+p+'px"',b+=' viewBox="0 0 '+p+" "+p+'" ',b+=' preserveAspectRatio="xMinYMin meet"',b+=u.text||n.text?' role="img" aria-labelledby="'+S([u.id,n.id].join(" ").trim())+'"':"",b+=">",b+=u.text?'<title id="'+S(u.id)+'">'+S(u.text)+"</title>":"",b+=n.text?'<description id="'+S(n.id)+'">'+S(n.text)+"</description>":"",b+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',b+='<path d="',m=0;m<y.getModuleCount();m+=1)for(E=m*i+l,C=0;C<y.getModuleCount();C+=1)y.isDark(m,C)&&(B=C*i+l,b+="M"+B+","+E+_);return b+='" stroke="transparent" fill="black"/>',b+="</svg>",b},y.createDataURL=function(i,l){i=i||2,l=typeof l>"u"?i*4:l;let n=y.getModuleCount()*i+l*2,u=l,s=n-l;return it(n,n,function(p,C){if(u<=p&&p<s&&u<=C&&C<s){let B=Math.floor((p-u)/i),m=Math.floor((C-u)/i);return y.isDark(m,B)?0:1}else return 1})},y.createImgTag=function(i,l,n){i=i||2,l=typeof l>"u"?i*4:l;let u=y.getModuleCount()*i+l*2,s="";return s+="<img",s+=' src="',s+=y.createDataURL(i,l),s+='"',s+=' width="',s+=u,s+='"',s+=' height="',s+=u,s+='"',n&&(s+=' alt="',s+=S(n),s+='"'),s+="/>",s};let S=function(i){let l="";for(let n=0;n<i.length;n+=1){let u=i.charAt(n);switch(u){case"<":l+="&lt;";break;case">":l+="&gt;";break;case"&":l+="&amp;";break;case'"':l+="&quot;";break;default:l+=u;break}}return l},Z=function(i){i=typeof i>"u"?2:i;let n=y.getModuleCount()*1+i*2,u=i,s=n-i,p,C,B,m,E,b={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},_={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},k="";for(p=0;p<n;p+=2){for(B=Math.floor((p-u)/1),m=Math.floor((p+1-u)/1),C=0;C<n;C+=1)E="\u2588",u<=C&&C<s&&u<=p&&p<s&&y.isDark(B,Math.floor((C-u)/1))&&(E=" "),u<=C&&C<s&&u<=p+1&&p+1<s&&y.isDark(m,Math.floor((C-u)/1))?E+=" ":E+="\u2588",k+=i<1&&p+1>=s?_[E]:b[E];k+=`
`}return n%2&&i>0?k.substring(0,k.length-n-1)+Array(n+1).join("\u2580"):k.substring(0,k.length-1)};return y.createASCII=function(i,l){if(i=i||1,i<2)return Z(l);i-=1,l=typeof l>"u"?i*2:l;let n=y.getModuleCount()*i+l*2,u=l,s=n-l,p,C,B,m,E=Array(i+1).join("\u2588\u2588"),b=Array(i+1).join("  "),_="",k="";for(p=0;p<n;p+=1){for(B=Math.floor((p-u)/i),k="",C=0;C<n;C+=1)m=1,u<=C&&C<s&&u<=p&&p<s&&y.isDark(B,Math.floor((C-u)/i))&&(m=0),k+=m?E:b;for(B=0;B<i;B+=1)_+=k+`
`}return _.substring(0,_.length-1)},y.renderTo2dContext=function(i,l){l=l||2;let n=y.getModuleCount();for(let u=0;u<n;u++)for(let s=0;s<n;s++)i.fillStyle=y.isDark(u,s)?"black":"white",i.fillRect(s*l,u*l,l,l)},y};Q.stringToBytes=function(x){let a=[];for(let h=0;h<x.length;h+=1){let o=x.charCodeAt(h);a.push(o&255)}return a};Q.createStringToBytes=function(x,a){let h=(function(){let r=rt(x),c=function(){let f=r.read();if(f==-1)throw"eof";return f},e=0,t={};for(;;){let f=r.read();if(f==-1)break;let d=c(),y=c(),w=c(),g=String.fromCharCode(f<<8|d),A=y<<8|w;t[g]=A,e+=1}if(e!=a)throw e+" != "+a;return t})(),o=63;return function(r){let c=[];for(let e=0;e<r.length;e+=1){let t=r.charCodeAt(e);if(t<128)c.push(t);else{let f=h[r.charAt(e)];typeof f=="number"?(f&255)==f?c.push(f):(c.push(f>>>8),c.push(f&255)):c.push(o)}}return c}};var T={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},H={L:1,M:0,Q:3,H:2},N={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},v=(function(){let x=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],a=1335,h=7973,o=21522,r={},c=function(e){let t=0;for(;e!=0;)t+=1,e>>>=1;return t};return r.getBCHTypeInfo=function(e){let t=e<<10;for(;c(t)-c(a)>=0;)t^=a<<c(t)-c(a);return(e<<10|t)^o},r.getBCHTypeNumber=function(e){let t=e<<12;for(;c(t)-c(h)>=0;)t^=h<<c(t)-c(h);return e<<12|t},r.getPatternPosition=function(e){return x[e-1]},r.getMaskFunction=function(e){switch(e){case N.PATTERN000:return function(t,f){return(t+f)%2==0};case N.PATTERN001:return function(t,f){return t%2==0};case N.PATTERN010:return function(t,f){return f%3==0};case N.PATTERN011:return function(t,f){return(t+f)%3==0};case N.PATTERN100:return function(t,f){return(Math.floor(t/2)+Math.floor(f/3))%2==0};case N.PATTERN101:return function(t,f){return t*f%2+t*f%3==0};case N.PATTERN110:return function(t,f){return(t*f%2+t*f%3)%2==0};case N.PATTERN111:return function(t,f){return(t*f%3+(t+f)%2)%2==0};default:throw"bad maskPattern:"+e}},r.getErrorCorrectPolynomial=function(e){let t=U([1],0);for(let f=0;f<e;f+=1)t=t.multiply(U([1,O.gexp(f)],0));return t},r.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case T.MODE_NUMBER:return 10;case T.MODE_ALPHA_NUM:return 9;case T.MODE_8BIT_BYTE:return 8;case T.MODE_KANJI:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case T.MODE_NUMBER:return 12;case T.MODE_ALPHA_NUM:return 11;case T.MODE_8BIT_BYTE:return 16;case T.MODE_KANJI:return 10;default:throw"mode:"+e}else if(t<41)switch(e){case T.MODE_NUMBER:return 14;case T.MODE_ALPHA_NUM:return 13;case T.MODE_8BIT_BYTE:return 16;case T.MODE_KANJI:return 12;default:throw"mode:"+e}else throw"type:"+t},r.getLostPoint=function(e){let t=e.getModuleCount(),f=0;for(let w=0;w<t;w+=1)for(let g=0;g<t;g+=1){let A=0,D=e.isDark(w,g);for(let M=-1;M<=1;M+=1)if(!(w+M<0||t<=w+M))for(let L=-1;L<=1;L+=1)g+L<0||t<=g+L||M==0&&L==0||D==e.isDark(w+M,g+L)&&(A+=1);A>5&&(f+=3+A-5)}for(let w=0;w<t-1;w+=1)for(let g=0;g<t-1;g+=1){let A=0;e.isDark(w,g)&&(A+=1),e.isDark(w+1,g)&&(A+=1),e.isDark(w,g+1)&&(A+=1),e.isDark(w+1,g+1)&&(A+=1),(A==0||A==4)&&(f+=3)}for(let w=0;w<t;w+=1)for(let g=0;g<t-6;g+=1)e.isDark(w,g)&&!e.isDark(w,g+1)&&e.isDark(w,g+2)&&e.isDark(w,g+3)&&e.isDark(w,g+4)&&!e.isDark(w,g+5)&&e.isDark(w,g+6)&&(f+=40);for(let w=0;w<t;w+=1)for(let g=0;g<t-6;g+=1)e.isDark(g,w)&&!e.isDark(g+1,w)&&e.isDark(g+2,w)&&e.isDark(g+3,w)&&e.isDark(g+4,w)&&!e.isDark(g+5,w)&&e.isDark(g+6,w)&&(f+=40);let d=0;for(let w=0;w<t;w+=1)for(let g=0;g<t;g+=1)e.isDark(g,w)&&(d+=1);let y=Math.abs(100*d/t/t-50)/5;return f+=y*10,f},r})(),O=(function(){let x=new Array(256),a=new Array(256);for(let o=0;o<8;o+=1)x[o]=1<<o;for(let o=8;o<256;o+=1)x[o]=x[o-4]^x[o-5]^x[o-6]^x[o-8];for(let o=0;o<255;o+=1)a[x[o]]=o;let h={};return h.glog=function(o){if(o<1)throw"glog("+o+")";return a[o]},h.gexp=function(o){for(;o<0;)o+=255;for(;o>=256;)o-=255;return x[o]},h})(),U=function(x,a){if(typeof x.length>"u")throw x.length+"/"+a;let h=(function(){let r=0;for(;r<x.length&&x[r]==0;)r+=1;let c=new Array(x.length-r+a);for(let e=0;e<x.length-r;e+=1)c[e]=x[e+r];return c})(),o={};return o.getAt=function(r){return h[r]},o.getLength=function(){return h.length},o.multiply=function(r){let c=new Array(o.getLength()+r.getLength()-1);for(let e=0;e<o.getLength();e+=1)for(let t=0;t<r.getLength();t+=1)c[e+t]^=O.gexp(O.glog(o.getAt(e))+O.glog(r.getAt(t)));return U(c,0)},o.mod=function(r){if(o.getLength()-r.getLength()<0)return o;let c=O.glog(o.getAt(0))-O.glog(r.getAt(0)),e=new Array(o.getLength());for(let t=0;t<o.getLength();t+=1)e[t]=o.getAt(t);for(let t=0;t<r.getLength();t+=1)e[t]^=O.gexp(O.glog(r.getAt(t))+c);return U(e,0).mod(r)},o},Y=(function(){let x=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],a=function(r,c){let e={};return e.totalCount=r,e.dataCount=c,e},h={},o=function(r,c){switch(c){case H.L:return x[(r-1)*4+0];case H.M:return x[(r-1)*4+1];case H.Q:return x[(r-1)*4+2];case H.H:return x[(r-1)*4+3];default:return}};return h.getRSBlocks=function(r,c){let e=o(r,c);if(typeof e>"u")throw"bad rs block @ typeNumber:"+r+"/errorCorrectionLevel:"+c;let t=e.length/3,f=[];for(let d=0;d<t;d+=1){let y=e[d*3+0],w=e[d*3+1],g=e[d*3+2];for(let A=0;A<y;A+=1)f.push(a(w,g))}return f},h})(),J=function(){let x=[],a=0,h={};return h.getBuffer=function(){return x},h.getAt=function(o){let r=Math.floor(o/8);return(x[r]>>>7-o%8&1)==1},h.put=function(o,r){for(let c=0;c<r;c+=1)h.putBit((o>>>r-c-1&1)==1)},h.getLengthInBits=function(){return a},h.putBit=function(o){let r=Math.floor(a/8);x.length<=r&&x.push(0),o&&(x[r]|=128>>>a%8),a+=1},h},q=function(x){let a=T.MODE_NUMBER,h=x,o={};o.getMode=function(){return a},o.getLength=function(e){return h.length},o.write=function(e){let t=h,f=0;for(;f+2<t.length;)e.put(r(t.substring(f,f+3)),10),f+=3;f<t.length&&(t.length-f==1?e.put(r(t.substring(f,f+1)),4):t.length-f==2&&e.put(r(t.substring(f,f+2)),7))};let r=function(e){let t=0;for(let f=0;f<e.length;f+=1)t=t*10+c(e.charAt(f));return t},c=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-48;throw"illegal char :"+e};return o},z=function(x){let a=T.MODE_ALPHA_NUM,h=x,o={};o.getMode=function(){return a},o.getLength=function(c){return h.length},o.write=function(c){let e=h,t=0;for(;t+1<e.length;)c.put(r(e.charAt(t))*45+r(e.charAt(t+1)),11),t+=2;t<e.length&&c.put(r(e.charAt(t)),6)};let r=function(c){if("0"<=c&&c<="9")return c.charCodeAt(0)-48;if("A"<=c&&c<="Z")return c.charCodeAt(0)-65+10;switch(c){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+c}};return o},tt=function(x){let a=T.MODE_8BIT_BYTE,h=x,o=Q.stringToBytes(x),r={};return r.getMode=function(){return a},r.getLength=function(c){return o.length},r.write=function(c){for(let e=0;e<o.length;e+=1)c.put(o[e],8)},r},et=function(x){let a=T.MODE_KANJI,h=x,o=Q.stringToBytes;(function(e,t){let f=o(e);if(f.length!=2||(f[0]<<8|f[1])!=t)throw"sjis not supported."})("\u53CB",38726);let r=o(x),c={};return c.getMode=function(){return a},c.getLength=function(e){return~~(r.length/2)},c.write=function(e){let t=r,f=0;for(;f+1<t.length;){let d=(255&t[f])<<8|255&t[f+1];if(33088<=d&&d<=40956)d-=33088;else if(57408<=d&&d<=60351)d-=49472;else throw"illegal char at "+(f+1)+"/"+d;d=(d>>>8&255)*192+(d&255),e.put(d,13),f+=2}if(f<t.length)throw"illegal char at "+(f+1)},c},V=function(){let x=[],a={};return a.writeByte=function(h){x.push(h&255)},a.writeShort=function(h){a.writeByte(h),a.writeByte(h>>>8)},a.writeBytes=function(h,o,r){o=o||0,r=r||h.length;for(let c=0;c<r;c+=1)a.writeByte(h[c+o])},a.writeString=function(h){for(let o=0;o<h.length;o+=1)a.writeByte(h.charCodeAt(o))},a.toByteArray=function(){return x},a.toString=function(){let h="";h+="[";for(let o=0;o<x.length;o+=1)o>0&&(h+=","),h+=x[o];return h+="]",h},a},nt=function(){let x=0,a=0,h=0,o="",r={},c=function(t){o+=String.fromCharCode(e(t&63))},e=function(t){if(t<0)throw"n:"+t;if(t<26)return 65+t;if(t<52)return 97+(t-26);if(t<62)return 48+(t-52);if(t==62)return 43;if(t==63)return 47;throw"n:"+t};return r.writeByte=function(t){for(x=x<<8|t&255,a+=8,h+=1;a>=6;)c(x>>>a-6),a-=6},r.flush=function(){if(a>0&&(c(x<<6-a),x=0,a=0),h%3!=0){let t=3-h%3;for(let f=0;f<t;f+=1)o+="="}},r.toString=function(){return o},r},rt=function(x){let a=x,h=0,o=0,r=0,c={};c.read=function(){for(;r<8;){if(h>=a.length){if(r==0)return-1;throw"unexpected end of file./"+r}let f=a.charAt(h);if(h+=1,f=="=")return r=0,-1;if(f.match(/^\s$/))continue;o=o<<6|e(f.charCodeAt(0)),r+=6}let t=o>>>r-8&255;return r-=8,t};let e=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(t==43)return 62;if(t==47)return 63;throw"c:"+t};return c},ot=function(x,a){let h=x,o=a,r=new Array(x*a),c={};c.setPixel=function(d,y,w){r[y*h+d]=w},c.write=function(d){d.writeString("GIF87a"),d.writeShort(h),d.writeShort(o),d.writeByte(128),d.writeByte(0),d.writeByte(0),d.writeByte(0),d.writeByte(0),d.writeByte(0),d.writeByte(255),d.writeByte(255),d.writeByte(255),d.writeString(","),d.writeShort(0),d.writeShort(0),d.writeShort(h),d.writeShort(o),d.writeByte(0);let y=2,w=t(y);d.writeByte(y);let g=0;for(;w.length-g>255;)d.writeByte(255),d.writeBytes(w,g,255),g+=255;d.writeByte(w.length-g),d.writeBytes(w,g,w.length-g),d.writeByte(0),d.writeString(";")};let e=function(d){let y=d,w=0,g=0,A={};return A.write=function(D,M){if(D>>>M)throw"length over";for(;w+M>=8;)y.writeByte(255&(D<<w|g)),M-=8-w,D>>>=8-w,g=0,w=0;g=D<<w|g,w=w+M},A.flush=function(){w>0&&y.writeByte(g)},A},t=function(d){let y=1<<d,w=(1<<d)+1,g=d+1,A=f();for(let I=0;I<y;I+=1)A.add(String.fromCharCode(I));A.add(String.fromCharCode(y)),A.add(String.fromCharCode(w));let D=V(),M=e(D);M.write(y,g);let L=0,P=String.fromCharCode(r[L]);for(L+=1;L<r.length;){let I=String.fromCharCode(r[L]);L+=1,A.contains(P+I)?P=P+I:(M.write(A.indexOf(P),g),A.size()<4095&&(A.size()==1<<g&&(g+=1),A.add(P+I)),P=I)}return M.write(A.indexOf(P),g),M.write(w,g),M.flush(),D.toByteArray()},f=function(){let d={},y=0,w={};return w.add=function(g){if(w.contains(g))throw"dup key:"+g;d[g]=y,y+=1},w.size=function(){return y},w.indexOf=function(g){return d[g]},w.contains=function(g){return typeof d[g]<"u"},w};return c},it=function(x,a,h){let o=ot(x,a);for(let t=0;t<a;t+=1)for(let f=0;f<x;f+=1)o.setPixel(f,t,h(f,t));let r=V();o.write(r);let c=nt(),e=r.toByteArray();for(let t=0;t<e.length;t+=1)c.writeByte(e[t]);return c.flush(),"data:image/gif;base64,"+c},j=Q,ct=Q.stringToBytes;j.stringToBytes=function(x){return x};var K=class{constructor(a,h,o,r,c,e=800){this.textInput=document.getElementById(a),this.qrCodeContainer=document.getElementById(h),this.generateBtn=document.getElementById(o),this.pasteBtn=document.getElementById(r),this.clearBtn=document.getElementById(c),this.maxLength=e,this.errorContainer=document.createElement("div"),this.errorContainer.className="error-message",this.errorContainer.style.color="red",this.errorContainer.style.margin="10px 0",this.textInput.parentNode?.insertBefore(this.errorContainer,this.textInput.nextSibling),this.initializeEventListeners(),this.setupLengthValidation()}initializeEventListeners(){this.generateBtn.addEventListener("click",()=>this.generateQRCode()),this.pasteBtn.addEventListener("click",()=>this.pasteText()),this.clearBtn.addEventListener("click",()=>this.clearAll()),this.textInput.addEventListener("input",()=>this.validateInputLength()),this.textInput.addEventListener("keypress",a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),this.generateQRCode())})}setupLengthValidation(){this.textInput.setAttribute("maxlength",this.maxLength.toString())}validateInputLength(){let a=this.textInput.value;if(a.length>this.maxLength*.8){let h=this.maxLength-a.length;this.errorContainer.textContent=`Warning: ${h} characters remaining. Very long text may not fit in QR code.`}else this.errorContainer.textContent=""}getOptimalErrorCorrection(a){return a.length>500?"L":a.length>200?"M":a.length>100?"Q":"H"}generateQRCode(){let a=this.textInput.value.trim();if(!a){this.showError("Please enter some text first!");return}if(a.length>this.maxLength){this.showError(`Text is too long! Maximum ${this.maxLength} characters allowed.`);return}let h=new TextEncoder().encode(a);this.qrCodeContainer.innerHTML="",this.errorContainer.textContent="";try{let o=this.getOptimalErrorCorrection(h),r=j(0,o);r.addData(h,"Byte"),r.make();let c=this.createQRCodeSVG(r);this.qrCodeContainer.appendChild(c),this.showQRCodeInfo(r,a.length,o)}catch(o){console.error("QR Code generation error:",o),this.showError("Error generating QR code. The text might be too long or contain unsupported characters.")}}createQRCodeSVG(a){let h=a.getModuleCount(),o=200,r=o/h,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width",o.toString()),c.setAttribute("height",o.toString()),c.setAttribute("viewBox",`0 0 ${o} ${o}`),c.style.border="1px solid #ddd",c.style.background="white";let e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("fill","#ffffff"),c.appendChild(e);for(let t=0;t<h;t++)for(let f=0;f<h;f++)if(a.isDark(t,f)){let d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttribute("x",(f*r).toString()),d.setAttribute("y",(t*r).toString()),d.setAttribute("width",r.toString()),d.setAttribute("height",r.toString()),d.setAttribute("fill","#000000"),c.appendChild(d)}return c}showQRCodeInfo(a,h,o){let r=document.createElement("div");r.style.marginTop="10px",r.style.fontSize="12px",r.style.color="#666";let c=a.getModuleCount();r.textContent=`QR Code: ${c}x${c} modules | Text: ${h} chars | Error correction: ${o}`,this.qrCodeContainer.appendChild(r)}showError(a){this.errorContainer.textContent=a,setTimeout(()=>{this.errorContainer.textContent=""},5e3)}async pasteText(){try{let a=await navigator.clipboard.readText();a.length>this.maxLength?(this.showError(`Pasted text is too long! Only first ${this.maxLength} characters will be used.`),this.textInput.value=a.substring(0,this.maxLength)):this.textInput.value=a,this.validateInputLength()}catch(a){console.error("Failed to read from clipboard:",a),this.showError("Unable to paste from clipboard. Please check browser permissions.")}}clearAll(){this.textInput.value="",this.qrCodeContainer.innerHTML="",this.errorContainer.textContent=""}};document.addEventListener("DOMContentLoaded",()=>{new K("textInput","qrcode","generateBtn","pasteBtn","clearBtn",1e3)});
